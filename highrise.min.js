!function(a){a.fn.highrise=function(d){var e=a(this),f=(c.any(),new b(e,d));return a(window).resize(function(){f.resize()}),window.onscroll=function(){f.onscroll()},e};var b=function(b,c){var d={z:2,tgt:"li",colour:[55,255,55,.5],shadow:{blur:20,col:[0,0,0,.5]},gradient:{colour:[255,55,55,.75],angle:45},parent:!1};a.extend(d,c),this.el=b,this.config=d,this.tgtType=this.config.tgt,this.working=!1,this.over=!1,this.init()};b.prototype.init=function(){this.createDiv(),this.list=[],this.setupItems(),this.poscheck()},b.prototype.setupItems=function(){var b=this;this.el.children(this.tgtType).each(function(c){var d=a(this),e=d.offset();b.list[c]={i:c,el:d,x:e.left,y:e.top,css:{mx:d.css("margin-left"),my:d.css("margin-top"),px:d.css("padding-left"),py:d.css("padding-top")}},b.interaction(d,c)})},b.prototype.createDiv=function(){var b=this.config,c=document.createElement("div");c.id="hi-rise";var d=document.createElement("div");if(d.id="hi-cloud",document.body.appendChild(c),document.body.appendChild(d),this.copy=a("#"+c.id),this.cover=a("#"+d.id),b.shadow){var e=this.rgbaise(b.shadow.col);this.copy.css({position:"absolute","z-index":b.z+1,"box-shadow":"0 0 "+b.shadow.blur+"px "+e})}else this.copy.css({position:"absolute","z-index":b.z+1});if(this.cover.css({position:"absolute","z-index":-1,transition:"top 0s",transition:"opacity .15s",opacity:0,width:"100%",height:"100%",top:0,left:0}),b.gradient){var f=this.rgbaise(b.colour),g=this.rgbaise(b.gradient.colour),h=(this.rgbaise(b.gradient.angle),"linear-gradient(0deg,"+f+", "+g+")");this.cover.css({background:h})}else this.cover.css({background:this.rgbaise(b.colour)})},b.prototype.interaction=function(a,b){function c(){d.cover.css({opacity:0,transition:"opacity 0s"}).promise().done(function(){setTimeout(function(){d.cover.css({"z-index":-1}),d.copy.html(""),d.working=!1},0)})}var d=this,e=this.list[b];a.on("mouseenter",function(){d.over=!0,d.working||(d.copy.css({left:e.x,top:e.y}),d.cover.css({transition:"opacity .4s","z-index":d.config.z,opacity:1}).promise().done(function(){a.clone().appendTo(d.copy),d.adjustMargins(d.copy,e)}),d.copy.on("mouseleave",function(){d.over=!1,d.working=!0,this.major||c()}),d.cover.on("mousemove",function(){d.over&&!d.working&&(d.over=!1,d.working=!0,c())}))})},b.prototype.poscheck=function(){$this=this,this.major=!1,this.el.on("mouseenter",function(){this.major=!0}).on("mouseleave",function(){this.major=!1})},b.prototype.adjustMargins=function(a,b){var c=(b.css,a.children("li"));c.css({margin:0,padding:0})},b.prototype.rgbise=function(a){var b=a[0],c=a[1],d=a[2],e="rgb(";return e+=b+",",e+=c+",",e+=d+")"},b.prototype.rgbaise=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f="rgba(";return f+=b+",",f+=c+",",f+=d+",",f+=e+")"},b.prototype.onscroll=function(){this.cover.css({top:window.pageYOffset})},b.prototype.resize=function(){for(var a=0;a<this.list.length;a++){var b=this.list[a],c=b.el.offset();b.x=c.left,b.y=c.top}},b.prototype.hsl=function(a){var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=Math.max(b,c,d),f=Math.min(b,c,d),g=(e+f)/2,h=0,i=0;e!=f&&(h=.5>g?(e-f)/(e+f):(e-f)/(2-e-f),i=b==e?(c-d)/(e-f):c==e?2+(d-b)/(e-f):4+(b-c)/(e-f)),g=100*g,h=100*h,i=60*i,0>i&&(i+=360);var j=[i,h,g];return j},b.prototype.rgb=function(a){var b,c,d,e,f,g,h=a[0],i=a[1],j=a[2];return i/=100,j/=100,0==i?e=f=g=255*j:(c=.5>=j?j*(i+1):j+i-j*i,b=2*j-c,d=h/360,e=this.hue2rgb(b,c,d+1/3),f=this.hue2rgb(b,c,d),g=this.hue2rgb(b,c,d-1/3)),[Math.round(e),Math.round(f),Math.round(g)]},b.prototype.hue2rgb=function(a,b,c){var d;return 0>c?c+=1:c>1&&(c-=1),d=1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a,255*d};var c={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return c.Android()||c.BlackBerry()||c.iOS()||c.Opera()||c.Windows()}}}(jQuery);